/var/runtime/botocore/vendored/requests/__init__.py:91: RequestsDependencyWarning: urllib3 (1.26.4) or chardet (4.0.0) doesn't match a supported version!
RequestsDependencyWarning)
START RequestId: XXXX Version: $LATEST
{"e": XXXX, "m": "aws.lambda.enhanced.invocations", "t": ["region:us-east-1", "account_id:XXXX", "functionname:integration-dev-http-requests_python27", "resource:integration-dev-http-requests_python27", "cold_start:true", "memorysize:1024", "runtime:python2.7", "datadog_lambda:vXX", "dd_lambda_layer:datadog-python27_2.XX.0"], "v": 1}
HTTP GET https://ip-ranges.datadoghq.com/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
HTTP GET https://ip-ranges.datadoghq.eu/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
2021-03-24 18:59:23.308 (-04:00)	4a65eb11-7a28-4d82-82eb-be3af849379b	[ERROR]	[dd.trace_id=10321503320999063250 dd.span_id=9150553537852557931]	Error flushing metrics and events
Traceback (most recent call last):
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/base.py", line 343, in flush
    self.reporter.flush_distributions(dists)
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/reporters.py", line 24, in flush_distributions
    api.Distribution.send(distributions, compress_payload=self.compress_payload)
  File "/opt/python/lib/python2.7/site-packages/datadog/api/distributions.py", line 43, in send
    attach_host_name=attach_host_name, compress_payload=compress_payload, **series_dict
  File "/opt/python/lib/python2.7/site-packages/datadog/api/resources.py", line 88, in send
    compress_payload=compress_payload
  File "/opt/python/lib/python2.7/site-packages/datadog/api/api_client.py", line 166, in submit
    proxies=_proxies, verify=_cacert
  File "/opt/python/lib/python2.7/site-packages/datadog/api/http_client.py", line 100, in request
    proxies=proxies, verify=verify)
  File "/opt/python/lib/python2.7/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py", line 95, in _wrap_send
    response = func(*args, **kwargs)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 133, in _log_request
    _print_request_string(request)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 147, in _print_request_string
    data_dict = json.loads(data)
  File "/usr/lib64/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded{"traces": [[{"resource": "integration-dev-http-requests_python27", "name": "aws.lambda", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_sampling_priority_v1": 1, "system.pid": XXXX, "_dd.agent_psr": 1.0}, "parent_id": "XXXX", "meta": {"http.method": "GET", "runtime-id": "XXXX", "request_id": "XXXX", "function_trigger.event_source": "api-gateway", "cold_start": "true", "datadog_lambda": "X.X.X", "function_arn": "arn:aws:lambda:us-east-1:601427279990:function:integration-dev-http-requests_python27", "dd_trace": "X.X.X", "_dd.origin": "lambda", "http.status_code": "200", "resource_names": "integration-dev-http-requests_python27", "function_trigger.event_source_arn": "arn:aws:apigateway:us-east-1::/restapis/wt6mne2s9k/stages/test", "function_version": "$LATEST"}, "error": 0, "duration": XXXX, "type": "serverless", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.com/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.eu/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.method": "POST", "http.url": "https://api.datadoghq.com/api/v1/distribution_points", "error.type": "exceptions.ValueError", "_dd.origin": "lambda", "error.msg": "No JSON object could be decoded", "error.stack": "Traceback (most recent call last):\n  File \"/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py\", line 95, in _wrap_send\n    response = func(*args, **kwargs)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 133, in _log_request\n    _print_request_string(request)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 147, in _print_request_string\n    data_dict = json.loads(data)\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n"}, "error": 1, "duration": XXXX, "type": "http", "span_id": "XXXX"}]]}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	Init Duration: XXXX ms	
XRAY TraceId: XXXX	SegmentId: XXXX	Sampled: true	
START RequestId: XXXX Version: $LATEST
{"e": XXXX, "m": "aws.lambda.enhanced.invocations", "t": ["region:us-east-1", "account_id:XXXX", "functionname:integration-dev-http-requests_python27", "resource:integration-dev-http-requests_python27", "cold_start:false", "memorysize:1024", "runtime:python2.7", "datadog_lambda:vXX", "dd_lambda_layer:datadog-python27_2.XX.0"], "v": 1}
HTTP GET https://ip-ranges.datadoghq.com/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
HTTP GET https://ip-ranges.datadoghq.eu/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
2021-03-24 18:59:24.782 (-04:00)	c5475e10-e4bd-45b9-8e56-94739785561d	[ERROR]	[dd.trace_id=9408818436884499860 dd.span_id=3037358926752735749]	Error flushing metrics and events
Traceback (most recent call last):
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/base.py", line 343, in flush
    self.reporter.flush_distributions(dists)
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/reporters.py", line 24, in flush_distributions
    api.Distribution.send(distributions, compress_payload=self.compress_payload)
  File "/opt/python/lib/python2.7/site-packages/datadog/api/distributions.py", line 43, in send
    attach_host_name=attach_host_name, compress_payload=compress_payload, **series_dict
  File "/opt/python/lib/python2.7/site-packages/datadog/api/resources.py", line 88, in send
    compress_payload=compress_payload
  File "/opt/python/lib/python2.7/site-packages/datadog/api/api_client.py", line 166, in submit
    proxies=_proxies, verify=_cacert
  File "/opt/python/lib/python2.7/site-packages/datadog/api/http_client.py", line 100, in request
    proxies=proxies, verify=verify)
  File "/opt/python/lib/python2.7/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py", line 95, in _wrap_send
    response = func(*args, **kwargs)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 133, in _log_request
    _print_request_string(request)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 147, in _print_request_string
    data_dict = json.loads(data)
  File "/usr/lib64/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded{"traces": [[{"resource": "integration-dev-http-requests_python27", "name": "aws.lambda", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_sampling_priority_v1": 1, "system.pid": XXXX, "_dd.agent_psr": 1.0}, "parent_id": "XXXX", "meta": {"runtime-id": "XXXX", "request_id": "XXXX", "function_trigger.event_source": "sns", "cold_start": "false", "datadog_lambda": "X.X.X", "function_arn": "arn:aws:lambda:us-east-1:601427279990:function:integration-dev-http-requests_python27", "dd_trace": "X.X.X", "_dd.origin": "lambda", "resource_names": "integration-dev-http-requests_python27", "function_trigger.event_source_arn": "arn:aws:sns:us-east-2:123456789012:sns-lambda", "function_version": "$LATEST"}, "error": 0, "duration": XXXX, "type": "serverless", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.com/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.eu/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.method": "POST", "http.url": "https://api.datadoghq.com/api/v1/distribution_points", "error.type": "exceptions.ValueError", "_dd.origin": "lambda", "error.msg": "No JSON object could be decoded", "error.stack": "Traceback (most recent call last):\n  File \"/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py\", line 95, in _wrap_send\n    response = func(*args, **kwargs)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 133, in _log_request\n    _print_request_string(request)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 147, in _print_request_string\n    data_dict = json.loads(data)\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n"}, "error": 1, "duration": XXXX, "type": "http", "span_id": "XXXX"}]]}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
XRAY TraceId: XXXX	SegmentId: XXXX	Sampled: true	
START RequestId: XXXX Version: $LATEST
{"e": XXXX, "m": "aws.lambda.enhanced.invocations", "t": ["region:us-east-1", "account_id:XXXX", "functionname:integration-dev-http-requests_python27", "resource:integration-dev-http-requests_python27", "cold_start:false", "memorysize:1024", "runtime:python2.7", "datadog_lambda:vXX", "dd_lambda_layer:datadog-python27_2.XX.0"], "v": 1}
HTTP GET https://ip-ranges.datadoghq.com/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
HTTP GET https://ip-ranges.datadoghq.eu/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
2021-03-24 18:59:26.240 (-04:00)	cbc6e1d6-5367-4dc6-8745-03ad65a9a11a	[ERROR]	[dd.trace_id=666 dd.span_id=7239900240122457397]	Error flushing metrics and events
Traceback (most recent call last):
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/base.py", line 343, in flush
    self.reporter.flush_distributions(dists)
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/reporters.py", line 24, in flush_distributions
    api.Distribution.send(distributions, compress_payload=self.compress_payload)
  File "/opt/python/lib/python2.7/site-packages/datadog/api/distributions.py", line 43, in send
    attach_host_name=attach_host_name, compress_payload=compress_payload, **series_dict
  File "/opt/python/lib/python2.7/site-packages/datadog/api/resources.py", line 88, in send
    compress_payload=compress_payload
  File "/opt/python/lib/python2.7/site-packages/datadog/api/api_client.py", line 166, in submit
    proxies=_proxies, verify=_cacert
  File "/opt/python/lib/python2.7/site-packages/datadog/api/http_client.py", line 100, in request
    proxies=proxies, verify=verify)
  File "/opt/python/lib/python2.7/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py", line 95, in _wrap_send
    response = func(*args, **kwargs)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 133, in _log_request
    _print_request_string(request)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 147, in _print_request_string
    data_dict = json.loads(data)
  File "/usr/lib64/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded{"traces": [[{"resource": "integration-dev-http-requests_python27", "name": "aws.lambda", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_sampling_priority_v1": 1, "system.pid": XXXX}, "parent_id": "XXXX", "meta": {"runtime-id": "XXXX", "request_id": "XXXX", "function_trigger.event_source": "sqs", "cold_start": "false", "datadog_lambda": "X.X.X", "function_arn": "arn:aws:lambda:us-east-1:601427279990:function:integration-dev-http-requests_python27", "dd_trace": "X.X.X", "_dd.origin": "lambda", "resource_names": "integration-dev-http-requests_python27", "function_trigger.event_source_arn": "arn:aws:sqs:us-east-2:123456789012:my-queue", "function_version": "$LATEST"}, "error": 0, "duration": XXXX, "type": "serverless", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.com/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.eu/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.method": "POST", "http.url": "https://api.datadoghq.com/api/v1/distribution_points", "error.type": "exceptions.ValueError", "_dd.origin": "lambda", "error.msg": "No JSON object could be decoded", "error.stack": "Traceback (most recent call last):\n  File \"/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py\", line 95, in _wrap_send\n    response = func(*args, **kwargs)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 133, in _log_request\n    _print_request_string(request)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 147, in _print_request_string\n    data_dict = json.loads(data)\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n"}, "error": 1, "duration": XXXX, "type": "http", "span_id": "XXXX"}]]}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
XRAY TraceId: XXXX	SegmentId: XXXX	Sampled: true	
START RequestId: XXXX Version: $LATEST
{"e": XXXX, "m": "aws.lambda.enhanced.invocations", "t": ["region:us-east-1", "account_id:XXXX", "functionname:integration-dev-http-requests_python27", "resource:integration-dev-http-requests_python27", "cold_start:true", "memorysize:1024", "runtime:python2.7", "datadog_lambda:vXX", "dd_lambda_layer:datadog-python27_2.XX.0"], "v": 1}
HTTP GET https://ip-ranges.datadoghq.com/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
HTTP GET https://ip-ranges.datadoghq.eu/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
2021-03-24 19:20:58.390 (-04:00)	d7890575-1ba8-4e85-b344-67a9262d30e6	[ERROR]	[dd.trace_id=2651450631585496156 dd.span_id=16362136608133294100]	Error flushing metrics and events
Traceback (most recent call last):
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/base.py", line 343, in flush
    self.reporter.flush_distributions(dists)
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/reporters.py", line 24, in flush_distributions
    api.Distribution.send(distributions, compress_payload=self.compress_payload)
  File "/opt/python/lib/python2.7/site-packages/datadog/api/distributions.py", line 43, in send
    attach_host_name=attach_host_name, compress_payload=compress_payload, **series_dict
  File "/opt/python/lib/python2.7/site-packages/datadog/api/resources.py", line 88, in send
    compress_payload=compress_payload
  File "/opt/python/lib/python2.7/site-packages/datadog/api/api_client.py", line 166, in submit
    proxies=_proxies, verify=_cacert
  File "/opt/python/lib/python2.7/site-packages/datadog/api/http_client.py", line 100, in request
    proxies=proxies, verify=verify)
  File "/opt/python/lib/python2.7/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py", line 95, in _wrap_send
    response = func(*args, **kwargs)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 133, in _log_request
    _print_request_string(request)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 147, in _print_request_string
    data_dict = json.loads(data)
  File "/usr/lib64/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded{"traces": [[{"resource": "integration-dev-http-requests_python27", "name": "aws.lambda", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_sampling_priority_v1": 1, "system.pid": XXXX, "_dd.agent_psr": 1.0}, "parent_id": "XXXX", "meta": {"http.method": "GET", "runtime-id": "XXXX", "request_id": "XXXX", "function_trigger.event_source": "api-gateway", "cold_start": "true", "datadog_lambda": "X.X.X", "function_arn": "arn:aws:lambda:us-east-1:601427279990:function:integration-dev-http-requests_python27", "dd_trace": "X.X.X", "_dd.origin": "lambda", "http.status_code": "200", "resource_names": "integration-dev-http-requests_python27", "function_trigger.event_source_arn": "arn:aws:apigateway:us-east-1::/restapis/wt6mne2s9k/stages/test", "function_version": "$LATEST"}, "error": 0, "duration": XXXX, "type": "serverless", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.com/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.eu/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.method": "POST", "http.url": "https://api.datadoghq.com/api/v1/distribution_points", "error.type": "exceptions.ValueError", "_dd.origin": "lambda", "error.msg": "No JSON object could be decoded", "error.stack": "Traceback (most recent call last):\n  File \"/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py\", line 95, in _wrap_send\n    response = func(*args, **kwargs)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 133, in _log_request\n    _print_request_string(request)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 147, in _print_request_string\n    data_dict = json.loads(data)\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n"}, "error": 1, "duration": XXXX, "type": "http", "span_id": "XXXX"}]]}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	Init Duration: XXXX ms	
XRAY TraceId: XXXX	SegmentId: XXXX	Sampled: true	
START RequestId: XXXX Version: $LATEST
{"e": XXXX, "m": "aws.lambda.enhanced.invocations", "t": ["region:us-east-1", "account_id:XXXX", "functionname:integration-dev-http-requests_python27", "resource:integration-dev-http-requests_python27", "cold_start:false", "memorysize:1024", "runtime:python2.7", "datadog_lambda:vXX", "dd_lambda_layer:datadog-python27_2.XX.0"], "v": 1}
HTTP GET https://ip-ranges.datadoghq.com/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
HTTP GET https://ip-ranges.datadoghq.eu/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
2021-03-24 19:20:59.861 (-04:00)	7c45c0e8-ec65-4c01-8f12-a7f9fbad7356	[ERROR]	[dd.trace_id=2348533311474123073 dd.span_id=11168244115586656362]	Error flushing metrics and events
Traceback (most recent call last):
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/base.py", line 343, in flush
    self.reporter.flush_distributions(dists)
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/reporters.py", line 24, in flush_distributions
    api.Distribution.send(distributions, compress_payload=self.compress_payload)
  File "/opt/python/lib/python2.7/site-packages/datadog/api/distributions.py", line 43, in send
    attach_host_name=attach_host_name, compress_payload=compress_payload, **series_dict
  File "/opt/python/lib/python2.7/site-packages/datadog/api/resources.py", line 88, in send
    compress_payload=compress_payload
  File "/opt/python/lib/python2.7/site-packages/datadog/api/api_client.py", line 166, in submit
    proxies=_proxies, verify=_cacert
  File "/opt/python/lib/python2.7/site-packages/datadog/api/http_client.py", line 100, in request
    proxies=proxies, verify=verify)
  File "/opt/python/lib/python2.7/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py", line 95, in _wrap_send
    response = func(*args, **kwargs)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 133, in _log_request
    _print_request_string(request)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 147, in _print_request_string
    data_dict = json.loads(data)
  File "/usr/lib64/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded{"traces": [[{"resource": "integration-dev-http-requests_python27", "name": "aws.lambda", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_sampling_priority_v1": 1, "system.pid": XXXX, "_dd.agent_psr": 1.0}, "parent_id": "XXXX", "meta": {"runtime-id": "XXXX", "request_id": "XXXX", "function_trigger.event_source": "sns", "cold_start": "false", "datadog_lambda": "X.X.X", "function_arn": "arn:aws:lambda:us-east-1:601427279990:function:integration-dev-http-requests_python27", "dd_trace": "X.X.X", "_dd.origin": "lambda", "resource_names": "integration-dev-http-requests_python27", "function_trigger.event_source_arn": "arn:aws:sns:us-east-2:123456789012:sns-lambda", "function_version": "$LATEST"}, "error": 0, "duration": XXXX, "type": "serverless", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.com/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.eu/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.method": "POST", "http.url": "https://api.datadoghq.com/api/v1/distribution_points", "error.type": "exceptions.ValueError", "_dd.origin": "lambda", "error.msg": "No JSON object could be decoded", "error.stack": "Traceback (most recent call last):\n  File \"/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py\", line 95, in _wrap_send\n    response = func(*args, **kwargs)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 133, in _log_request\n    _print_request_string(request)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 147, in _print_request_string\n    data_dict = json.loads(data)\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n"}, "error": 1, "duration": XXXX, "type": "http", "span_id": "XXXX"}]]}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
XRAY TraceId: XXXX	SegmentId: XXXX	Sampled: true	
START RequestId: XXXX Version: $LATEST
{"e": XXXX, "m": "aws.lambda.enhanced.invocations", "t": ["region:us-east-1", "account_id:XXXX", "functionname:integration-dev-http-requests_python27", "resource:integration-dev-http-requests_python27", "cold_start:false", "memorysize:1024", "runtime:python2.7", "datadog_lambda:vXX", "dd_lambda_layer:datadog-python27_2.XX.0"], "v": 1}
HTTP GET https://ip-ranges.datadoghq.com/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
HTTP GET https://ip-ranges.datadoghq.eu/ Headers: ["Accept-Encoding:gzip, deflate", "Accept:*/*", "Connection:keep-alive", "User-Agent:python-requests/2.25.1", "x-datadog-parent-id:XXXX", "x-datadog-sampling-priority:1", "x-datadog-trace-id:XXXX"] Data: {}
2021-03-24 19:21:01.289 (-04:00)	4d16db18-bc9b-49f3-94b7-1f89617f08de	[ERROR]	[dd.trace_id=666 dd.span_id=13592299927587946264]	Error flushing metrics and events
Traceback (most recent call last):
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/base.py", line 343, in flush
    self.reporter.flush_distributions(dists)
  File "/opt/python/lib/python2.7/site-packages/datadog/threadstats/reporters.py", line 24, in flush_distributions
    api.Distribution.send(distributions, compress_payload=self.compress_payload)
  File "/opt/python/lib/python2.7/site-packages/datadog/api/distributions.py", line 43, in send
    attach_host_name=attach_host_name, compress_payload=compress_payload, **series_dict
  File "/opt/python/lib/python2.7/site-packages/datadog/api/resources.py", line 88, in send
    compress_payload=compress_payload
  File "/opt/python/lib/python2.7/site-packages/datadog/api/api_client.py", line 166, in submit
    proxies=_proxies, verify=_cacert
  File "/opt/python/lib/python2.7/site-packages/datadog/api/http_client.py", line 100, in request
    proxies=proxies, verify=verify)
  File "/opt/python/lib/python2.7/site-packages/requests/sessions.py", line 542, in request
    resp = self.send(prep, **send_kwargs)
  File "/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py", line 95, in _wrap_send
    response = func(*args, **kwargs)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 133, in _log_request
    _print_request_string(request)
  File "/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py", line 147, in _print_request_string
    data_dict = json.loads(data)
  File "/usr/lib64/python2.7/json/__init__.py", line 339, in loads
    return _default_decoder.decode(s)
  File "/usr/lib64/python2.7/json/decoder.py", line 364, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
  File "/usr/lib64/python2.7/json/decoder.py", line 382, in raw_decode
    raise ValueError("No JSON object could be decoded")
ValueError: No JSON object could be decoded{"traces": [[{"resource": "integration-dev-http-requests_python27", "name": "aws.lambda", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_sampling_priority_v1": 1, "system.pid": XXXX}, "parent_id": "XXXX", "meta": {"runtime-id": "XXXX", "request_id": "XXXX", "function_trigger.event_source": "sqs", "cold_start": "false", "datadog_lambda": "X.X.X", "function_arn": "arn:aws:lambda:us-east-1:601427279990:function:integration-dev-http-requests_python27", "dd_trace": "X.X.X", "_dd.origin": "lambda", "resource_names": "integration-dev-http-requests_python27", "function_trigger.event_source_arn": "arn:aws:sqs:us-east-2:123456789012:my-queue", "function_version": "$LATEST"}, "error": 0, "duration": XXXX, "type": "serverless", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.com/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.status_code": "200", "http.url": "https://ip-ranges.datadoghq.eu/", "_dd.origin": "lambda", "http.method": "GET"}, "error": 0, "duration": XXXX, "type": "http", "span_id": "XXXX"}, {"resource": "requests.request", "name": "requests.request", "service": "aws.lambda", "start": XXXX, "trace_id": "XXXX", "metrics": {"_dd.measured": 1}, "parent_id": "XXXX", "meta": {"http.method": "POST", "http.url": "https://api.datadoghq.com/api/v1/distribution_points", "error.type": "exceptions.ValueError", "_dd.origin": "lambda", "error.msg": "No JSON object could be decoded", "error.stack": "Traceback (most recent call last):\n  File \"/opt/python/lib/python2.7/site-packages/ddtrace/contrib/requests/connection.py\", line 95, in _wrap_send\n    response = func(*args, **kwargs)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 133, in _log_request\n    _print_request_string(request)\n  File \"/opt/python/lib/python2.7/site-packages/datadog_lambda/patch.py\", line 147, in _print_request_string\n    data_dict = json.loads(data)\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 339, in loads\n    return _default_decoder.decode(s)\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 364, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n  File \"/usr/lib64/python2.7/json/decoder.py\", line 382, in raw_decode\n    raise ValueError(\"No JSON object could be decoded\")\nValueError: No JSON object could be decoded\n"}, "error": 1, "duration": XXXX, "type": "http", "span_id": "XXXX"}]]}
END RequestId: XXXX
REPORT RequestId: XXXX	Duration: XXXX ms	Billed Duration: XXXX ms	Memory Size: 1024 MB	Max Memory Used: XXXX MB	
XRAY TraceId: XXXX	SegmentId: XXXX	Sampled: true	
